{"version":3,"file":"main.js","mappings":"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","sources":["webpack://game-orbitalcommand/./src/behaviors/behaviors.ts","webpack://game-orbitalcommand/./src/html5audio.ts","webpack://game-orbitalcommand/./src/html5data.ts","webpack://game-orbitalcommand/./src/html5game.ts","webpack://game-orbitalcommand/./src/html5input.ts","webpack://game-orbitalcommand/./src/html5video.ts","webpack://game-orbitalcommand/webpack/bootstrap","webpack://game-orbitalcommand/webpack/runtime/define property getters","webpack://game-orbitalcommand/webpack/runtime/hasOwnProperty shorthand","webpack://game-orbitalcommand/webpack/runtime/make namespace object","webpack://game-orbitalcommand/./src/main.ts"],"sourcesContent":["import HTML5Game from '../html5game';\nimport Actor from '../actor';\n\nlet behaviors: Record<string, Function> = {\n    'log': function (actor: Actor, game: HTML5Game) {\n        console.log('foo');\n    },\n    'texture': function (actor: Actor, game: HTML5Game) {\n        if (typeof actor.properties.x == 'number' &&\n            typeof actor.properties.y == 'number' &&\n            typeof actor.properties.texture == 'string') {\n            game.video.drawImage(actor.properties.x, actor.properties.y, actor.properties.texture);\n        }\n    },\n    'rectangle': function(actor:Actor,game:HTML5Game){\n        if (typeof actor.properties.x == 'number' &&\n        typeof actor.properties.y == 'number' &&\n        typeof actor.properties.width == 'number' &&\n        typeof actor.properties.height == 'number')\n        game.video.drawRect(actor.properties.x,actor.properties.y,actor.properties.width,actor.properties.height);\n    },\n    'player':function(actor:Actor,game:HTML5Game){\n        if(game.input.poll('ArrowRight') && typeof actor.properties.x == 'number') actor.properties.x += 4;\n        if(game.input.poll('ArrowLeft') && typeof actor.properties.x == 'number') actor.properties.x -= 4;\n    }\n}\n\nexport default behaviors;","class HTML5Audio{\n    sounds:Record<string,HTMLAudioElement>;\n    \n    constructor(){\n        this.sounds = {};\n    }\n\n    playSound(snd:string){\n        if(typeof this.sounds[snd] == 'undefined'){\n            this.sounds[snd] = new Audio();\n            this.sounds[snd].src = snd;\n        }\n        this.sounds[snd].play();\n    }\n\n    loopSound(){\n\n    }\n\n    stopSound(){\n\n    }\n}\n\nexport default HTML5Audio;","import Actor from './actor';\nimport HTML5Game from './html5game';\n\nclass HTML5Data{\n    constructor(){\n        \n    }\n\n    fetchStage(file:string,game:HTML5Game){\n        let xhttp = new XMLHttpRequest();\n        xhttp.addEventListener('load', () => {\n            let dom = new DOMParser();\n            let doc = dom.parseFromString(xhttp.responseText,'text/xml');\n            let groups = doc.querySelectorAll('g');\n            let newStage:Array<Actor> = [];\n            groups.forEach((element) => {\n                let actor:Actor = {id:'',properties:{},behaviors:[]};\n                let text = element.querySelector('text').textContent;\n                let text2 = text.split('&');\n\n                let rect = element.querySelectorAll('rect');\n                rect.forEach((index) => {\n                    actor.properties.x = parseInt(index.attributes.getNamedItem('x').value);\n                    actor.properties.y = parseInt(index.attributes.getNamedItem('y').value);\n                    actor.properties.width = parseInt(index.attributes.getNamedItem('width').value);\n                    actor.properties.height = parseInt(index.attributes.getNamedItem('height').value);\n                });\n                \n                actor.id = text2[0];\n\n                let properties = text2[1].split(',');\n\n                properties.forEach((property) => {\n                    let property2 = property.split(':');\n                    actor.properties[property2[0],property[1]];\n                });\n\n                actor.behaviors = text2[2].split(',');\n\n                newStage.push(actor);\n            });\n            game.stage = newStage\n        });\n        xhttp.open(\"GET\",file);\n        xhttp.send();\n    }\n}\n\nexport default HTML5Data;","import HTML5Video from './html5video';\nimport HTML5Audio from './html5audio';\nimport HTML5Input from './html5input';\nimport HTML5Data from './html5data';\nimport Actor from './actor';\nimport behaviors from './behaviors/behaviors';\n\nclass HTML5Game{\n    video:HTML5Video;\n    audio:HTML5Audio;\n    input:HTML5Input;\n    data:HTML5Data;\n    state:Record<string,string|number>;\n    stage:Array<Actor>;\n\n    constructor(){\n        this.video = new HTML5Video(1280,720);\n        this.audio = new HTML5Audio();\n        this.input = new HTML5Input();\n        this.data = new HTML5Data();\n        this.stage = [];\n        this.loadStage('stages/stage1.svg');\n        \n\n        /*\n        this.stage.push({id:'rect',properties:{x:0,y:0,w:64,h:64},behaviors:['rectangle']});\n        this.stage.push({id:'ball',properties:{x:0,y:0,texture:'/images/sprites/objects/2ball.png'},behaviors:['texture']});\n        this.stage.push({id:'player',properties:{x:0,y:0,texture:'/images/sprites/objects/1ball.png'},behaviors:['player','texture']});\n        */\n\n        setInterval(() => {this.main()}, 1000);\n    }\n\n    loadStage(file:string){\n        this.data.fetchStage(file,this);\n    }\n\n    main(){\n        console.log(this.stage);\n        this.video.clear();\n        this.stage.forEach((actor) => {\n            actor.behaviors.forEach((behavior) => {\n                if(typeof behaviors[behavior] == 'function') behaviors[behavior](actor,this);\n            });\n        });\n    }\n}\n\nexport default HTML5Game;","import Actor from \"./actor\";\n\nclass HTML5Input{\n    map:Record<string,number>;\n\n    constructor(){\n        this.map = {};\n        document.addEventListener('keydown',(e) => {\n            this.map[e.key] = 1;\n        });\n        document.addEventListener('keyup',(e) => {\n            this.map[e.key] = 0;\n        });\n    }\n\n    poll(key:string){\n        return this.map[key];\n    }\n}\n\nexport default HTML5Input;","class HTML5Video{\n    canvas:HTMLCanvasElement;\n    ctx:CanvasRenderingContext2D;\n    images:Record<string,HTMLImageElement>;\n    constructor(width:number,height:number){\n        this.canvas = document.createElement('canvas');\n        this.canvas.width = width;\n        this.canvas.height = height;\n        this.canvas.style.border = '1px solid white';\n        this.ctx = this.canvas.getContext('2d');\n        document.body.appendChild(this.canvas);\n        document.body.style.backgroundColor = '#000000';\n\n        this.images = {};\n\n    }\n\n    clear(){\n        this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);\n    }\n    \n    drawImage(x:number,y:number,img:string){\n        if (typeof this.images[img] == \"undefined\"){\n            this.images[img] = new Image();\n            this.images[img].src = img;\n        }\n        this.ctx.drawImage(this.images[img],x,y);\n    }\n\n    drawRect(x:number,y:number,w:number,h:number){\n        this.ctx.fillStyle = '#FF0000';\n        this.ctx.fillRect(x,y,w,h);\n    }\n\n    resizeCanvas(){\n        \n    }\n\n    \n}\n\nexport default HTML5Video;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import HTML5Game from './html5game';\n\nnew HTML5Game();"],"names":[],"sourceRoot":""}